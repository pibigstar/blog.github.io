<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/32x32.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/16x16.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="派大星, pibigstar,blog,go">










<meta name="keywords" content="派大星,pibigstar">
<meta property="og:type" content="website">
<meta property="og:title" content="派大星的博客">
<meta property="og:url" content="http://pibigstar.com/page/4/index.html">
<meta property="og:site_name" content="派大星的博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="派大星的博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://pibigstar.com/page/4/">





  <title>派大星的博客 - 很多事情不是会了才能做，而是做了才能学会</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">派大星的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">很多事情不是会了才能做，而是做了才能学会</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>
            
            Schedule
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            Sitemap
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pibigstar.com/2019/08/05/SpringBoot使用redis做分布式Session/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="派大星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/qq.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="派大星的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/05/SpringBoot使用redis做分布式Session/" itemprop="url">SpringBoot使用redis做分布式Session</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-05T18:06:04+08:00">
                2019-08-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/springboot/" itemprop="url" rel="index">
                    <span itemprop="name">springboot</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-核心原理"><a href="#1-核心原理" class="headerlink" title="1. 核心原理"></a>1. 核心原理</h1><p>主要是通过redis，当用户登录后生成一个随机的uuid作为token，将token作为键，user对象作为值存储到redis数据库中，同时将token保存到cookie中 ，当访问其他页面时判断cookie中是否有token，如果有，则根据此token从redis拿到用户信息即可。</p>
<p><strong>关于springboot 操作redis方面请查看</strong> : <a href="https://blog.csdn.net/junmoxi/article/details/80694405" target="_blank" rel="noopener">https://blog.csdn.net/junmoxi/article/details/80694405</a></p>
<h1 id="2-User服务类"><a href="#2-User服务类" class="headerlink" title="2. User服务类"></a>2. User服务类</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.pibigstar.springboot.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.Cacheable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Propagation;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"><span class="keyword">import</span> com.pibigstar.springboot.dao.JPADao;</span><br><span class="line"><span class="keyword">import</span> com.pibigstar.springboot.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.pibigstar.springboot.service.RedisService;</span><br><span class="line"><span class="keyword">import</span> com.pibigstar.springboot.service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String COOKIE_USER_TOKEN = <span class="string">"token"</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> COOKIE_TOKEN_TIMEOUT = <span class="number">3600</span>*<span class="number">24</span>*<span class="number">2</span>;<span class="comment">//两天</span></span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> RedisService redisService;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 登录</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> loginVo</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(HttpServletResponse response, LoginVo loginVo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(loginVo == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> GlobalException(CodeMsg.SERVER_ERROR);</span><br><span class="line">		&#125;</span><br><span class="line">		String mobile = loginVo.getMobile();</span><br><span class="line">		String formPass = loginVo.getPassword();</span><br><span class="line">		<span class="comment">//判断手机号是否存在</span></span><br><span class="line">		User user = getById(Long.parseLong(mobile));</span><br><span class="line">		<span class="keyword">if</span>(user == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> GlobalException(CodeMsg.MOBILE_NOT_EXIST);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//验证密码</span></span><br><span class="line">		String dbPass = user.getPassword();</span><br><span class="line">		String saltDB = user.getSalt();</span><br><span class="line">		String calcPass = MD5Util.formPassToDBPass(formPass, saltDB);</span><br><span class="line">		<span class="keyword">if</span>(!calcPass.equals(dbPass)) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> GlobalException(CodeMsg.PASSWORD_ERROR);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//生成cookie</span></span><br><span class="line">		String token = UUID.randomUUID().toString().replace(<span class="string">"-"</span>, <span class="string">""</span>);</span><br><span class="line">		addCookie(response, token, user);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 根据token从redis中拿到user对象</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">getByToken</span><span class="params">(HttpServletResponse response, String token)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (token==<span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		User user = (User) redisService.getObject(token);</span><br><span class="line">		<span class="keyword">if</span> (user!=<span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="comment">//延长cookie有效期</span></span><br><span class="line">			addCookie(response,token,user);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> user;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 将token放到cookie中</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> token</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addCookie</span><span class="params">(HttpServletResponse response, String token, User user)</span> </span>&#123;</span><br><span class="line">		redisService.setObject(token, user,COOKIE_TOKEN_TIMEOUT);</span><br><span class="line">		Cookie cookie = <span class="keyword">new</span> Cookie(COOKIE_USER_TOKEN, token);</span><br><span class="line">		<span class="comment">//设置cookie有效期</span></span><br><span class="line">		cookie.setMaxAge(COOKIE_TOKEN_TIMEOUT);</span><br><span class="line">		cookie.setPath(<span class="string">"/"</span>);</span><br><span class="line">		response.addCookie(cookie);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="3-读取cookie中的token"><a href="#3-读取cookie中的token" class="headerlink" title="3. 读取cookie中的token"></a>3. 读取cookie中的token</h1><p>我们通过实现 <code>HandlerMethodArgumentResolver</code> 接口，重写里面的方法，将cookie中或者parameter中的token数据拿到然后查询出user注入到Controller中 的方法参数中</p>
<p>注册一个<code>ArgumentResolvers</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.pibigstar.springboot.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.method.support.HandlerMethodArgumentResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addArgumentResolvers</span><span class="params">(List&lt;HandlerMethodArgumentResolver&gt; resolvers)</span> </span>&#123;</span><br><span class="line">		resolvers.add(<span class="keyword">new</span> UserArgumentResolver());</span><br><span class="line">		WebMvcConfigurer.<span class="keyword">super</span>.addArgumentResolvers(resolvers);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>具体实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.pibigstar.springboot.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.MethodParameter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.support.WebDataBinderFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.NativeWebRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.method.support.HandlerMethodArgumentResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.method.support.ModelAndViewContainer;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.pibigstar.springboot.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.pibigstar.springboot.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.pibigstar.springboot.service.impl.UserServiceImpl;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 拿到session或parameter中的token</span></span><br><span class="line"><span class="comment"> * 通过token拿到redis中的user</span></span><br><span class="line"><span class="comment"> * 将user注入到方法的参数中</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> pibigstar</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserArgumentResolver</span> <span class="keyword">implements</span> <span class="title">HandlerMethodArgumentResolver</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> UserService userService;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">supportsParameter</span><span class="params">(MethodParameter parameter)</span> </span>&#123;</span><br><span class="line">		Class&lt;?&gt; parameterType = parameter.getParameterType();</span><br><span class="line">		<span class="keyword">return</span> parameterType==User.class;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">resolveArgument</span><span class="params">(MethodParameter parameter, ModelAndViewContainer mavContainer,</span></span></span><br><span class="line"><span class="function"><span class="params">			NativeWebRequest webRequest, WebDataBinderFactory binderFactory)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		</span><br><span class="line">		HttpServletRequest request = webRequest.getNativeRequest(HttpServletRequest.class);</span><br><span class="line">		HttpServletResponse response = webRequest.getNativeResponse(HttpServletResponse.class);</span><br><span class="line">		</span><br><span class="line">		String cookieToken = getCookieToken(request,UserServiceImpl.COOKIE_USER_TOKEN);</span><br><span class="line">		String parameterToken = request.getParameter(UserServiceImpl.COOKIE_USER_TOKEN);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span> (StringUtils.isEmpty(parameterToken) &amp;&amp; StringUtils.isEmpty(cookieToken)) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		String token = StringUtils.isEmpty(parameterToken)?cookieToken:parameterToken;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> userService.getByToken(response,token);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> String <span class="title">getCookieToken</span><span class="params">(HttpServletRequest request,String cookieName)</span> </span>&#123;</span><br><span class="line">		Cookie[] cookies = request.getCookies();</span><br><span class="line">		<span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">			<span class="keyword">if</span> (cookie.getName().equals(cookieName)) &#123;</span><br><span class="line">				<span class="keyword">return</span> cookie.getValue();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="4-使用"><a href="#4-使用" class="headerlink" title="4. 使用"></a>4. 使用</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.pibigstar.springboot.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.pibigstar.springboot.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 这里的user 是通过token从redis拿到的</span></span><br><span class="line"><span class="comment">	 * 具体实现在UserArgumentResolver中</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">(User user,Model model)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(user==<span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			model.addAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pibigstar.com/2019/08/05/获取微信公众号信息接口/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="派大星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/qq.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="派大星的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/05/获取微信公众号信息接口/" itemprop="url">获取微信公众号信息接口</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-05T18:06:04+08:00">
                2019-08-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/随笔小记/" itemprop="url" rel="index">
                    <span itemprop="name">随笔小记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>西瓜插件里面的一个小接口：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://chromepluginapi.xiguaji.com/InspireCenter/SearchSubscribePopNew?kw=java派大星</span><br></pre></td></tr></table></figure>

<p>kw为公众号名称</p>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pibigstar.com/2019/07/31/使用java打开网页并截图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="派大星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/qq.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="派大星的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/31/使用java打开网页并截图/" itemprop="url">使用java打开网页并截图</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-31T20:08:04+08:00">
                2019-07-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-java工具类/" itemprop="url" rel="index">
                    <span itemprop="name">Java,java工具类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>控制浏览器打开网页只适用于JDK1.6之上的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.pibgstar.demo.utils;</span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.KeyEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.URISyntaxException;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> pibigstar</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> 网页截图工具类</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CutPictureUtil</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, URISyntaxException, AWTException </span>&#123;</span><br><span class="line">        <span class="comment">// 控制浏览器打开网页，仅适用于JdK1.6及以上版本</span></span><br><span class="line">        Desktop.getDesktop().browse(<span class="keyword">new</span> URL(<span class="string">"https://blog.csdn.net/junmoxi"</span>).toURI());</span><br><span class="line">        Robot robot = <span class="keyword">new</span> Robot();</span><br><span class="line">        <span class="comment">// 延迟一秒</span></span><br><span class="line">        robot.delay(<span class="number">1000</span>);</span><br><span class="line">        <span class="comment">// 获取屏幕宽度和高度</span></span><br><span class="line">        Dimension d = <span class="keyword">new</span> Dimension(Toolkit.getDefaultToolkit().getScreenSize());</span><br><span class="line">        <span class="keyword">int</span> width = (<span class="keyword">int</span>) d.getWidth();</span><br><span class="line">        <span class="keyword">int</span> height = (<span class="keyword">int</span>) d.getHeight();</span><br><span class="line">        <span class="comment">// 最大化浏览器</span></span><br><span class="line">        robot.keyRelease(KeyEvent.VK_F11);</span><br><span class="line">        robot.delay(<span class="number">1000</span>);</span><br><span class="line">        <span class="comment">// 对屏幕进行截图</span></span><br><span class="line">        Image image = robot.createScreenCapture(<span class="keyword">new</span> Rectangle(<span class="number">0</span>, <span class="number">0</span>, width, height));</span><br><span class="line">        <span class="comment">// 通过图形绘制工具类将截图保存</span></span><br><span class="line">        BufferedImage img = <span class="keyword">new</span> BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);</span><br><span class="line">        Graphics g = img.createGraphics();</span><br><span class="line">        g.drawImage(image, <span class="number">0</span>, <span class="number">0</span>, width, height, <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">// 保存图片</span></span><br><span class="line">        ImageIO.write(img, <span class="string">"jpg"</span>, <span class="keyword">new</span> File(<span class="string">"D:/tmp/"</span>+System.currentTimeMillis()+<span class="string">".jpg"</span>));</span><br><span class="line">        System.out.println(<span class="string">"done!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pibigstar.com/2019/07/31/Windows下编译Proto文件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="派大星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/qq.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="派大星的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/31/Windows下编译Proto文件/" itemprop="url">Windows下编译Proto文件</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-31T20:08:04+08:00">
                2019-07-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/go/" itemprop="url" rel="index">
                    <span itemprop="name">go</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>此处借助的为Windows的Linux子系统进行编译的</p>
</blockquote>
<h1 id="1-安装Windows子系统（WSL）"><a href="#1-安装Windows子系统（WSL）" class="headerlink" title="1. 安装Windows子系统（WSL）"></a>1. 安装Windows子系统（WSL）</h1><ol>
<li>设置开启开发者模式<br><img src="https://img-blog.csdnimg.cn/20190704221610362.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=,size_16,color_FFFFFF,t_70" alt></li>
<li>程序中开启WSL子系统<br><img src="https://img-blog.csdnimg.cn/20190704221809454.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li>
<li>应用商店下载Ubuntu</li>
</ol>
<p><strong>注意</strong><br>1 装好之后要修改一次密码，不然无法使用root</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd</span><br></pre></td></tr></table></figure>

<p>2 更新系统</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>

<p>3 安装make</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install make</span><br></pre></td></tr></table></figure>

<p>4 安装dos2unix</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install dos2unix</span><br></pre></td></tr></table></figure>

<h1 id="2-配置编译环境"><a href="#2-配置编译环境" class="headerlink" title="2.配置编译环境"></a>2.配置编译环境</h1><ol>
<li><p>安装go<br>百度 Ubuntu安装go</p>
</li>
<li><p>配置go环境<br>编辑 /etc/profile 文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>将下面内容加入到末尾（GOPAT是我Windows中的GOPATH）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GOROOT=/usr/<span class="built_in">local</span>/go</span><br><span class="line"><span class="built_in">export</span> GOPATH=/mnt/f/goWork</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$GOPATH</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$GOROOT</span>/bin:<span class="variable">$GOPATH</span>/bin</span><br></pre></td></tr></table></figure>

<p>执行下面命令使配置生效</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>

<p>如果出现每次关闭Terminal，配置就会失效，那么将配置放到 /etc/bash.bashrc 文件中</p>
<ol start="3">
<li>安装protoc<br>去这个网址下载：<a href="https://github.com/protocolbuffers/protobuf/releases" target="_blank" rel="noopener">https://github.com/protocolbuffers/protobuf/releases</a><br>解压：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip protoc.zip</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>将bin文件夹下的 protoc 复制到Linux 中的 /bin目录下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp protoc/bin/protoc /bin/protoc</span><br></pre></td></tr></table></figure>

<p>执行 <code>protoc -verson</code> 如果输出版本信息则证明配置成功</p>
<ol start="4">
<li><p>安装protoc-gen-go</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> get -u github.com/golang/protobuf/protoc-gen-<span class="keyword">go</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>protoc-gen-validate</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> get -d -u github.com/envoyproxy/protoc-gen-validate</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>然后进行到这个项目的目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$GOPATH</span>/src/github.com/envoyproxy/protoc-gen-validate</span><br><span class="line">make build</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pibigstar.com/2019/07/31/简单谈谈Java中的垃圾回收器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="派大星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/qq.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="派大星的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/31/简单谈谈Java中的垃圾回收器/" itemprop="url">简单谈谈Java中的垃圾回收器</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-31T20:08:04+08:00">
                2019-07-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-面试-JVM/" itemprop="url" rel="index">
                    <span itemprop="name">Java,面试,JVM</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-垃圾回收器算法"><a href="#1-垃圾回收器算法" class="headerlink" title="1. 垃圾回收器算法"></a>1. 垃圾回收器算法</h2><blockquote>
<p>目前主流垃圾回收器都采用的是可达性分析算法来判断对象是否已经存活，不使用引用计数算法判断对象存活的原因在于该算法很难解决相互引用的问题。</p>
</blockquote>
<h4 id="1-1-标记-清除算法（Mark-Sweep）"><a href="#1-1-标记-清除算法（Mark-Sweep）" class="headerlink" title="1.1 标记-清除算法（Mark-Sweep）"></a>1.1 标记-清除算法（Mark-Sweep）</h4><p>标记-清除算法由标记阶段和清除阶段构成。标记阶段是把所有活着的对象都做上标记的阶段；清除阶段是把那些没有标记的对象，也就是非活动对象回收的阶段。通过这两个阶段，就可以令不能利用的内存空间重新得到利用。</p>
<p>从标记-清除算法我们可以看出，该算法不涉及对象移动，但是可能会产生内存碎片化问题。空间碎片太高可能会导致程序运行时需要分配较大内存时候，无法找到足够的连续内存，需要其他垃圾回收帮助回收内存。</p>
<h4 id="1-2-复制算法（Copying）"><a href="#1-2-复制算法（Copying）" class="headerlink" title="1.2 复制算法（Copying）"></a>1.2 复制算法（Copying）</h4><p>复制算法内存空间分为两块区域：From、to，每次只使用其中一块，在垃圾回收时将正在使用的内存中的存活对象复制到未被使用的内存块中，之后，清除正在使用的内存块中的所有对象，交换两个内存的角色，完成垃圾回收。</p>
<p>上面那种复制算法有一半的空间是浪费的。所以在Java新生代把内存区域分为Eden空间、from、to空间3个部分，from和to空间也称为<code>survivor</code> 空间，用于存放未被回收的对象。对象开始都是<strong>Eden</strong>生成；当回收时，将Eden和from中存活的对象移动到to区域中。</p>
<p>复制算法存在空间浪费的情况，始终都要保持一个Survivor是空闲的，并且在GC的时候要是存活对象大小超过了Survivor中的大小，就需要另外的策略存储存活对象。</p>
<p>目前open JDK新生代回收策略就是采用的复制算法，其中Eden和Survivor的默认配置为<code>8:1</code></p>
<h4 id="1-3-标记-压缩算法（Mark-Compact）"><a href="#1-3-标记-压缩算法（Mark-Compact）" class="headerlink" title="1.3 标记-压缩算法（Mark-Compact）"></a>1.3 标记-压缩算法（Mark-Compact）</h4><p>标记-压缩算法由标记阶段和压缩阶段构成。标记阶段标记-清除算法中的标记阶段完全一样，压缩阶段是让所有存活的对象向一端移动。这样空闲内存都在另外一端，属于连续空间，不存在内存碎片化问题，但是会产生对象移动。</p>
<h4 id="1-4-分代算法（Generational-GC）"><a href="#1-4-分代算法（Generational-GC）" class="headerlink" title="1.4 分代算法（Generational GC）"></a>1.4 分代算法（Generational GC）</h4><p>根据对象的不同生命周期分别管理， JVM 中将对象分为我们熟悉的<strong>新生代、老年代和永久代</strong>分别管理。这样做的好处就是可以根据不同类型对象进行不同策略的管理，例如新生代中对象更新速度快，就会使用效率较高的复制算法。老年代中内存空间相对分配较大，而且时效性不如新生代强，就会常常使用Mark-Sweep-Compact (标记-清除-压缩)算法。</p>
<h2 id="2-各个算法的性能比较"><a href="#2-各个算法的性能比较" class="headerlink" title="2. 各个算法的性能比较"></a>2. 各个算法的性能比较</h2><table>
<thead>
<tr>
<th></th>
<th align="right">标记-清除</th>
<th align="center">复制算法</th>
<th>标记压缩</th>
</tr>
</thead>
<tbody><tr>
<td>时间开销</td>
<td align="right">中等</td>
<td align="center">最快</td>
<td>最慢</td>
</tr>
<tr>
<td>空间浪费</td>
<td align="right">不存在</td>
<td align="center">存在</td>
<td>不存在</td>
</tr>
<tr>
<td>内存碎片化</td>
<td align="right">存在</td>
<td align="center">不存在</td>
<td>不存在</td>
</tr>
<tr>
<td>是否移动对象</td>
<td align="right">否</td>
<td align="center">是</td>
<td>是</td>
</tr>
</tbody></table>
<p>从表格中我们可以看出，复制算法效率最高，也不存在内存碎片化，但有空间浪费的现象，一般用来处理新生代中的对象<br>而标记-清除算法和标记压缩算法则主要处理老年代中对象内存分配比较大的，并且时效性不如新生代的</p>
<h2 id="3-常见的垃圾回收器"><a href="#3-常见的垃圾回收器" class="headerlink" title="3. 常见的垃圾回收器"></a>3. 常见的垃圾回收器</h2><h3 id="3-1-按照处理过程分类"><a href="#3-1-按照处理过程分类" class="headerlink" title="3.1 按照处理过程分类:"></a>3.1 按照处理过程分类:</h3><ul>
<li>串行垃圾回收器（Serial Garbage Collector）</li>
<li>并行垃圾回收器（Parallel Garbage Collector）</li>
<li>并发标记扫描垃圾回收器（CMS Garbage Collector）</li>
</ul>
<h4 id="3-1-1-串行垃圾回收器"><a href="#3-1-1-串行垃圾回收器" class="headerlink" title="3.1.1 串行垃圾回收器"></a>3.1.1 串行垃圾回收器</h4><table>
<thead>
<tr>
<th>回收器名称</th>
<th align="right">使用的算法</th>
<th align="right">作用区域</th>
<th>单/多线程</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>Serial</td>
<td align="right">复制算法</td>
<td align="right">新生代</td>
<td>单线程</td>
<td>简单高效，不建议使用，Client默认的</td>
</tr>
<tr>
<td>Serial Old</td>
<td align="right">标记-压缩</td>
<td align="right">老年代</td>
<td>单线程</td>
<td>能和所有的Young GC搭配使用</td>
</tr>
</tbody></table>
<h4 id="3-1-2-并行垃圾回收器"><a href="#3-1-2-并行垃圾回收器" class="headerlink" title="3.1.2 并行垃圾回收器"></a>3.1.2 并行垃圾回收器</h4><table>
<thead>
<tr>
<th>回收器名称</th>
<th align="right">使用的算法</th>
<th align="right">作用区域</th>
<th align="right">单多线程</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>ParNew</td>
<td align="right">复制算法</td>
<td align="right">新生代</td>
<td align="right">多线程</td>
<td>唯一和CMS搭配的新生代垃圾回收器</td>
</tr>
<tr>
<td>Parallel Scavenge</td>
<td align="right">复制算法</td>
<td align="right">新生代</td>
<td align="right">多线程</td>
<td>更关注于吞吐量</td>
</tr>
<tr>
<td>ParNew Old</td>
<td align="right">标记整理</td>
<td align="right">老年代</td>
<td align="right">多线程</td>
<td>搭配Parallel Scavenge垃圾回收器</td>
</tr>
</tbody></table>
<h4 id="3-1-3-并发标记扫描垃圾回收器"><a href="#3-1-3-并发标记扫描垃圾回收器" class="headerlink" title="3.1.3 并发标记扫描垃圾回收器"></a>3.1.3 并发标记扫描垃圾回收器</h4><table>
<thead>
<tr>
<th>回收器名称</th>
<th>使用的算法</th>
<th align="right">作用区域</th>
<th align="right">单多线程</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>CMS</td>
<td>标记-清除</td>
<td align="right">老年代</td>
<td align="right">多线程</td>
<td>追求最短的暂时时间</td>
</tr>
</tbody></table>
<h3 id="3-2-按照处理的区域分类："><a href="#3-2-按照处理的区域分类：" class="headerlink" title="3.2 按照处理的区域分类："></a>3.2 按照处理的区域分类：</h3><h4 id="3-2-1-新生代（Young-GC）"><a href="#3-2-1-新生代（Young-GC）" class="headerlink" title="3.2.1 新生代（Young GC）"></a>3.2.1 新生代（Young GC）</h4><ul>
<li>Serial</li>
<li>ParNew</li>
<li>Parallel Scavenge<h4 id="3-2-2-老年代（Old-GC）"><a href="#3-2-2-老年代（Old-GC）" class="headerlink" title="3.2.2 老年代（Old GC）"></a>3.2.2 老年代（Old GC）</h4></li>
<li>Serial Old</li>
<li>ParNew Old</li>
<li>CMS</li>
</ul>
<h2 id="4-垃圾回收器的选择策略"><a href="#4-垃圾回收器的选择策略" class="headerlink" title="4. 垃圾回收器的选择策略"></a>4. 垃圾回收器的选择策略</h2><ol>
<li>客户端程序：Serial + Serial Old；</li>
<li>吞吐率优先的服务端程序（比如：计算密集型）：Parallel Scavenge + Parallel Old；</li>
<li>响应时间优先的服务端程序：ParNew + CMS。</li>
</ol>
<p>目前很大一部分的Java应用都集中在互联网的服务器端，这类应用尤其关系服务的响应时间，希望应用暂停时间更短，所以基本上使用的都是 <strong>ParNew + CMS</strong></p>
<p>在启动JVM参数加上 <code>-XX:+UseConcMarkSweepGC</code> 这个参数表示对于老年代的回收采用 CMS。</p>
<h4 id="4-1-CMS执行过程"><a href="#4-1-CMS执行过程" class="headerlink" title="4.1 CMS执行过程"></a>4.1 CMS执行过程</h4><p>CMS 的回收过程主要分为下面的几个步骤：</p>
<ol>
<li>初始标记(Initial Mark）</li>
<li>并发标记(Concurrent marking)</li>
<li>并发预清理(Concurrent pre-preclean)</li>
<li>重新标记(Final Remark）</li>
<li>并发清理(Concurrent sweep)</li>
<li>并发重置(Concurrent reset)</li>
</ol>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pibigstar.com/2019/07/31/SpringBoot自定义配置文件读取/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="派大星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/qq.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="派大星的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/31/SpringBoot自定义配置文件读取/" itemprop="url">SpringBoot自定义配置文件读取</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-31T20:08:04+08:00">
                2019-07-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/springboot/" itemprop="url" rel="index">
                    <span itemprop="name">springboot</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>有时候我们把配置都放到application.yml文件里面会造成此文件相当不好管理，所以我们可以有意识的进行拆分，将一些配置放到其他的配置文件里面，那么我们如何加载并使用它呢，其实很简单，直接读取然后放到Properties对象中就OK了，看代码</p>
<h1 id="读取配置"><a href="#读取配置" class="headerlink" title="读取配置"></a>读取配置</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.pibgstar.demo.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> pibigstar</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> 加载配置文件</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigUtil</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Logger logger = LoggerFactory.getLogger(ConfigUtil.class);</span><br><span class="line">    <span class="comment">// 配置文件的路径</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String CONFIG_NAME = <span class="string">"conf/config.properties"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Properties ps;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getInt</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        String value = getValue(key);</span><br><span class="line">        <span class="keyword">return</span> Integer.parseInt(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getString</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        String value = getValue(key);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> String(value.getBytes(<span class="string">"iso-8859-1"</span>),<span class="string">"utf-8"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">getValue</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (ps == <span class="keyword">null</span>) &#123;</span><br><span class="line">            init();</span><br><span class="line">        &#125;</span><br><span class="line">        String value = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(value)) &#123;</span><br><span class="line">            value = ps.getProperty(key);</span><br><span class="line">        &#125;</span><br><span class="line">        logger.info(<span class="string">"key:"</span>+key+<span class="string">"----value:"</span>+value);</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InputStream ras = ConfigUtil.class.getClassLoader().getResourceAsStream(CONFIG_NAME);</span><br><span class="line">            ps = <span class="keyword">new</span> Properties();</span><br><span class="line">            ps.load(ras);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="配置文件放置"><a href="#配置文件放置" class="headerlink" title="配置文件放置"></a>配置文件放置</h1><p>我们将config.properties放到<code>resources</code>下新建的conf文件夹下面就OK了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pibigstar.demo.url=http://www.pibigstar.com</span><br><span class="line">pibigstar.demo.number=8</span><br></pre></td></tr></table></figure>

<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestConfigUtil</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        String url = ConfigUtil.getString(<span class="string">"pibigstar.demo.url"</span>);</span><br><span class="line">        <span class="keyword">int</span> number = ConfigUtil.getInt(<span class="string">"pibigstar.demo.number"</span>);</span><br><span class="line">        System.out.println(url + <span class="string">"  "</span> + number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pibigstar.com/2019/07/31/Mybatis联表查询/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="派大星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/qq.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="派大星的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/31/Mybatis联表查询/" itemprop="url">Mybatis联表查询</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-31T20:08:04+08:00">
                2019-07-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-数据库-mybatis-SpringBoot技能大全/" itemprop="url" rel="index">
                    <span itemprop="name">Java,数据库,mybatis,SpringBoot技能大全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-使用注解方式"><a href="#1-使用注解方式" class="headerlink" title="1 使用注解方式"></a>1 使用注解方式</h1><h2 id="1-1-一对一"><a href="#1-1-一对一" class="headerlink" title="1.1 一对一"></a>1.1 一对一</h2><p>ClazzModel.java （返回前端的模型）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClazzModel</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="keyword">private</span> Grade grade; <span class="comment">//联表</span></span><br><span class="line">    <span class="keyword">private</span> User user;<span class="comment">// 联表</span></span><br><span class="line">	<span class="comment">//setter、getter</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ClazzMapper.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from poll_clazz"</span>)</span><br><span class="line"><span class="meta">@Results</span>(&#123;</span><br><span class="line">	<span class="comment">//一对一  one = @One()</span></span><br><span class="line">	<span class="meta">@Result</span>(property=<span class="string">"id"</span>,column=<span class="string">"id"</span>),<span class="comment">//不加这个查出来的id会为null</span></span><br><span class="line">	<span class="meta">@Result</span>(property = <span class="string">"grade"</span>,column = <span class="string">"grade_id"</span>,one = <span class="meta">@One</span>(select=<span class="string">"com.pibigstar.dao.GradeMapper.selectByPrimaryKey"</span>)),</span><br><span class="line">	<span class="meta">@Result</span>(property = <span class="string">"user"</span>,column = <span class="string">"user_id"</span>,one = <span class="meta">@One</span>(select=<span class="string">"com.pibigstar.dao.UserMapper.selectByPrimaryKey"</span>))</span><br><span class="line">&#125;)</span><br><span class="line"><span class="function">List&lt;ClazzModel&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<h2 id="1-2-一对多"><a href="#1-2-一对多" class="headerlink" title="1.2 一对多"></a>1.2 一对多</h2><p>QuestionModel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuestionModel</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String questionType;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Options&gt; options;</span><br><span class="line">    <span class="comment">//省略 setter、getter方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>QuestionMapper.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from poll_questions"</span>)</span><br><span class="line">    <span class="meta">@Results</span>(&#123;</span><br><span class="line">    	 <span class="comment">// 一对多  many = @Many()</span></span><br><span class="line">    	 <span class="meta">@Result</span>(property=<span class="string">"id"</span>,column=<span class="string">"id"</span>),<span class="comment">//不加这个查出来的id会为null</span></span><br><span class="line"><span class="meta">@Result</span>(property=<span class="string">"options"</span>,column=<span class="string">"id"</span>,many=<span class="meta">@Many</span>(select=<span class="string">"com.pibigstar.dao.OptionsMapper.findAllByQuestionId"</span>))</span><br><span class="line">    &#125;)</span><br><span class="line">	<span class="function">List&lt;QuestionModel&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<h2 id="1-3-多对多"><a href="#1-3-多对多" class="headerlink" title="1.3 多对多"></a>1.3 多对多</h2><p>业务介绍： 有一张问卷表（questionnaire），一张题库表（question），一张问卷与题库的桥表（qq）</p>
<p>希望能查出所有的问卷，每个问卷有对应的题</p>
<p>思路：我们先查出所有的问卷，然后通过问卷id 在桥表中查找出此问卷中的所有问题</p>
<p>QuestionnaireModel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuestionnaireModel</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Long id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="keyword">private</span> List&lt;QuestionModel&gt; questions;</span><br><span class="line">    <span class="comment">//省略setter、getter方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>QuestionnaireMapper.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from poll_questionnaire"</span>)</span><br><span class="line"><span class="meta">@Results</span>(&#123;</span><br><span class="line">	<span class="meta">@Result</span>(property=<span class="string">"id"</span>,column=<span class="string">"id"</span>),</span><br><span class="line">	  <span class="meta">@Result</span>(property=<span class="string">"questions"</span>,column=<span class="string">"id"</span>,many=<span class="meta">@Many</span>(select=<span class="string">"com.pibigstar.dao.QQMapper.selectAllQuestions"</span>)),</span><br><span class="line">&#125;)</span><br><span class="line"><span class="function">List&lt;QuestionnaireModel&gt; <span class="title">findAllModel</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>QQMapper.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from poll_questions where id in (select questions_id from poll_qq where questionnaire_id=#&#123;id&#125;)"</span>)</span><br><span class="line">  <span class="meta">@Results</span>(&#123;</span><br><span class="line">  	<span class="meta">@Result</span>(property=<span class="string">"id"</span>,column=<span class="string">"id"</span>),</span><br><span class="line">  	<span class="meta">@Result</span>(property=<span class="string">"options"</span>,column=<span class="string">"id"</span>,many=<span class="meta">@Many</span>(select=<span class="string">"com.pibigstar.dao.OptionsMapper.findAllByQuestionId"</span>))</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="function">List&lt;QuestionModel&gt; <span class="title">selectAllQuestions</span><span class="params">(Long id)</span></span>;</span><br></pre></td></tr></table></figure>

<h2 id="1-4-注意："><a href="#1-4-注意：" class="headerlink" title="1.4 注意："></a>1.4 注意：</h2><p>分步查询有时候非常浪费数据库资源，我们可以采用懒加载方式，当有需要的时候才进行分步查询<br>使用：fetchType=FetchType.LAZY</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from poll_clazz"</span>)</span><br><span class="line"><span class="meta">@Results</span>(&#123;</span><br><span class="line">	<span class="comment">//一对一  one = @One()</span></span><br><span class="line">	<span class="meta">@Result</span>(property=<span class="string">"id"</span>,column=<span class="string">"id"</span>),<span class="comment">//不加这个查出来的id会为null</span></span><br><span class="line">	<span class="meta">@Result</span>(property = <span class="string">"grade"</span>,column = <span class="string">"grade_id"</span>,one = <span class="meta">@One</span>(fetchType=FetchType.LAZY,select=<span class="string">"com.pibigstar.dao.GradeMapper.selectByPrimaryKey"</span>)),</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;ClazzModel&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<h1 id="2-使用xml配置方式"><a href="#2-使用xml配置方式" class="headerlink" title="2 使用xml配置方式"></a>2 使用xml配置方式</h1><h2 id="2-1-一对一"><a href="#2-1-一对一" class="headerlink" title="2.1 一对一"></a>2.1 一对一</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.briup.apps.poll.dao.extend.ClazzVMMapper"</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"clazzVMResultMap"</span> <span class="attr">type</span>=<span class="string">"com.briup.apps.poll.bean.extend.ClazzVM"</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">jdbcType</span>=<span class="string">"BIGINT"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 联表查询 association  --&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">association</span> <span class="attr">column</span>=<span class="string">"grade_id"</span> <span class="attr">property</span>=<span class="string">"grade"</span> <span class="attr">select</span>=<span class="string">"com.briup.apps.poll.dao.GradeMapper.selectByPrimaryKey"</span>&gt;</span><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">column</span>=<span class="string">"charge_id"</span> <span class="attr">property</span>=<span class="string">"charge"</span> <span class="attr">select</span>=<span class="string">"com.briup.apps.poll.dao.UserMapper.selectByPrimaryKey"</span>&gt;</span><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectById"</span> <span class="attr">parameterType</span>=<span class="string">"java.lang.Long"</span> <span class="attr">resultMap</span>=<span class="string">"clazzVMResultMap"</span>&gt;</span></span><br><span class="line">  	select * from poll_clazz where id=#&#123;id&#125;;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">   </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-一对多"><a href="#2-2-一对多" class="headerlink" title="2.2 一对多"></a>2.2 一对多</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"com.User"</span> <span class="attr">id</span>=<span class="string">"userAndItemsResultMap"</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- 用户信息 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"user_id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"username"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">property</span>=<span class="string">"sex"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">property</span>=<span class="string">"address"</span>/&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- 一个用户对应多个订单 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"ordersList"</span> <span class="attr">ofType</span>=<span class="string">"com.Orders"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"user_id"</span> <span class="attr">property</span>=<span class="string">"userid"</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"number"</span> <span class="attr">property</span>=<span class="string">"number"</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"createtime"</span> <span class="attr">property</span>=<span class="string">"createTime"</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"note"</span> <span class="attr">property</span>=<span class="string">"note"</span>/&gt;</span></span><br><span class="line">               <span class="comment">&lt;!-- 一个订单对应多个订单明细 --&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"orderdetails"</span> <span class="attr">ofType</span>=<span class="string">"com.OrderDetail"</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"orderdetail_id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"items_id"</span>   <span class="attr">property</span>=<span class="string">"itemsId"</span>/&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"items_num"</span>  <span class="attr">property</span>=<span class="string">"itemsNum"</span>/&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"orders_id"</span>  <span class="attr">property</span>=<span class="string">"ordersId"</span>/&gt;</span></span><br><span class="line">                   <span class="comment">&lt;!-- 一个订单明细对应一个商品 --&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"items"</span> <span class="attr">javaType</span>=<span class="string">"com.Items"</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"items_id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"items_name"</span> <span class="attr">property</span>=<span class="string">"itemsName"</span>/&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"items_detail"</span> <span class="attr">property</span>=<span class="string">"detail"</span>/&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"items_price"</span> <span class="attr">property</span>=<span class="string">"price"</span>/&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pibigstar.com/2019/07/20/JS前端随笔小记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="派大星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/qq.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="派大星的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/20/JS前端随笔小记/" itemprop="url">JS前端随笔小记</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-20T01:01:04+08:00">
                2019-07-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="获取点击处附近的值"><a href="#获取点击处附近的值" class="headerlink" title="获取点击处附近的值"></a>获取点击处附近的值</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group ebs-modal-choose"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;item.bidPrice&#125;"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">" btn-default selectPrice"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"epsicons icon-select1"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>点击span按钮时获取input中的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> $(<span class="built_in">document</span>).on(<span class="string">'click'</span>, <span class="string">'.selectPrice'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     <span class="keyword">var</span> username= $(<span class="keyword">this</span>).parent().parent().find(<span class="string">"input[name='username']"</span>).val();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>this 对象指的是点击的span标签对象，第一个parent获取到它的父级div对象，再通过parent获取div的父级对象div，在获取此div下面input对象的值。</p>
</blockquote>
<h2 id="禁止a标签点击"><a href="#禁止a标签点击" class="headerlink" title="禁止a标签点击"></a>禁止a标签点击</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"disable"</span>&gt;</span>pibigstar<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.disable</span>&#123;</span><br><span class="line">  <span class="attribute">pointer-events</span>:none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="输出横竖表格"><a href="#输出横竖表格" class="headerlink" title="输出横竖表格"></a>输出横竖表格</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">"priceTable"</span> <span class="attr">class</span>=<span class="string">"table scroll table-bordered"</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">"priceTbody"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$&#123;srModel.levelInfos&#125;"</span> <span class="attr">var</span>=<span class="string">"levelInfo"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;levelInfo&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$&#123;srModel.itemInfos&#125;"</span> <span class="attr">var</span>=<span class="string">"itemInfo"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;itemInfo&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$&#123;srModel.levelInfos&#125;"</span> <span class="attr">var</span>=<span class="string">"levelInfo"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"price"</span> &gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="遍历数组"><a href="#遍历数组" class="headerlink" title="遍历数组"></a>遍历数组</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> content = [<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>];</span><br><span class="line">$.each(content, <span class="function"><span class="keyword">function</span>(<span class="params">i,item</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>(<span class="string">"下标："</span>+ i +<span class="string">"值："</span>+item);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="对象转JSON"><a href="#对象转JSON" class="headerlink" title="对象转JSON"></a>对象转JSON</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = [];</span><br><span class="line">data[<span class="number">0</span>] = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">data[<span class="number">0</span>].id = <span class="number">1</span>;</span><br><span class="line">data[<span class="number">0</span>].name = <span class="string">"pibigstar"</span>;</span><br><span class="line"><span class="keyword">var</span> str = <span class="built_in">JSON</span>.stringify(data);</span><br><span class="line">[&#123;<span class="string">"id"</span>:<span class="string">"1"</span>,<span class="string">"name"</span>:<span class="string">"pibigstar"</span>&#125;]</span><br></pre></td></tr></table></figure>

<h2 id="新增-删除CSS样式"><a href="#新增-删除CSS样式" class="headerlink" title="新增/删除CSS样式"></a>新增/删除CSS样式</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#itemDiv"</span>).removeClass(<span class="string">"hidden"</span>);</span><br><span class="line">$(<span class="string">"#itemDiv"</span>).addClass(<span class="string">"hidden"</span>);</span><br></pre></td></tr></table></figure>

<h2 id="获取点击处在此列表中的位置"><a href="#获取点击处在此列表中的位置" class="headerlink" title="获取点击处在此列表中的位置"></a>获取点击处在此列表中的位置</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> $(<span class="built_in">document</span>).on(<span class="string">'click'</span>,<span class="string">'.deleteItemBtn'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="keyword">var</span> currentCell =$(<span class="string">"#myUl li"</span>).index(<span class="keyword">this</span>) + <span class="number">1</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pibigstar.com/2019/07/20/程序员开发必备工具（一）之IDEA插件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="派大星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/qq.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="派大星的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/20/程序员开发必备工具（一）之IDEA插件/" itemprop="url">程序员开发必备工具（一）之IDEA插件</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-20T01:01:04+08:00">
                2019-07-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具使用/" itemprop="url" rel="index">
                    <span itemprop="name">工具使用</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@[TOC]</p>
<h1 id="1-必备的IDEA插件"><a href="#1-必备的IDEA插件" class="headerlink" title="1. 必备的IDEA插件"></a>1. 必备的IDEA插件</h1><h2 id="1-1-mybatiscodehelperpro"><a href="#1-1-mybatiscodehelperpro" class="headerlink" title="1.1 mybatiscodehelperpro"></a>1.1 mybatiscodehelperpro</h2><p>mybatis代码自动生成插件，大部分单表操作的代码可自动生成 减少重复劳动 大幅提升效率。同时可在XML和接口间跳转。破解版：<a href="https://github.com/pengzhile/MyBatisCodeHelper-Pro-Crack/releases" target="_blank" rel="noopener">下载</a><br><img src="https://img-blog.csdnimg.cn/20190120130810444.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=,size_16,color_FFFFFF,t_70" alt><br><img src="https://img-blog.csdnimg.cn/20190120130847248.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=,size_16,color_FFFFFF,t_70" alt></p>
<h2 id="1-2-Translation"><a href="#1-2-Translation" class="headerlink" title="1.2 Translation"></a>1.2 Translation</h2><p>翻译插件，开发必不可少的</p>
<h2 id="1-3-Maven-Helper"><a href="#1-3-Maven-Helper" class="headerlink" title="1.3 Maven Helper"></a>1.3 Maven Helper</h2><p>检测Maven依赖冲突的<br><img src="https://img-blog.csdnimg.cn/20190120131606596.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=,size_16,color_FFFFFF,t_70" alt></p>
<h2 id="1-4-GsonFormat"><a href="#1-4-GsonFormat" class="headerlink" title="1.4 GsonFormat"></a>1.4 GsonFormat</h2><p>根据JSON生成实体类。<br><img src="https://img-blog.csdnimg.cn/20190120131303741.gif" alt></p>
<h2 id="1-5-RestfulToolkit"><a href="#1-5-RestfulToolkit" class="headerlink" title="1.5 RestfulToolkit"></a>1.5 RestfulToolkit</h2><p>根据URL路径快速定位到方法。快捷键 ctrl + Alt + N<br><img src="https://img-blog.csdnimg.cn/20190120131502302.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=,size_16,color_FFFFFF,t_70" alt></p>
<h2 id="1-6-Alibaba-Java-Coding-Guidelines"><a href="#1-6-Alibaba-Java-Coding-Guidelines" class="headerlink" title="1.6 Alibaba Java Coding Guidelines"></a>1.6 Alibaba Java Coding Guidelines</h2><p>阿里巴巴出品的代码风格检查，可以扫描整个项目 找到不规范的地方 并且大部分可以自动修复。<br><img src="https://img-blog.csdnimg.cn/2019012013202436.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=,size_16,color_FFFFFF,t_70" alt></p>
<h2 id="1-7-FindBugs-IDEA"><a href="#1-7-FindBugs-IDEA" class="headerlink" title="1.7 FindBugs-IDEA"></a>1.7 FindBugs-IDEA</h2><p>检测代码中可能的bug及不规范的位置，写完代码后检测下 避免低级bug<br><img src="https://img-blog.csdnimg.cn/20190120132158744.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=,size_16,color_FFFFFF,t_70" alt></p>
<h2 id="1-8-SequenceDiagram"><a href="#1-8-SequenceDiagram" class="headerlink" title="1.8 SequenceDiagram"></a>1.8 SequenceDiagram</h2><p>根据代码生成时序图<br><img src="https://img-blog.csdnimg.cn/20190120132816280.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=,size_16,color_FFFFFF,t_70" alt><br><img src="https://img-blog.csdnimg.cn/20190120132715455.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=,size_16,color_FFFFFF,t_70" alt></p>
<h2 id="1-9-NR-Null-Object"><a href="#1-9-NR-Null-Object" class="headerlink" title="1.9 .NR Null Object"></a>1.9 .NR Null Object</h2><blockquote>
<p>Nullable是空对象的相关操作接口，用于确定对象是否为空，因为在空对象模式中，对象为空会被包装成一个Object，成为Null Object，该对象会对原有对象的所有方法进行空实现。</p>
<ul>
<li>分析所选类可声明为接口的方法；</li>
<li>抽象出公有接口；</li>
<li>创建空对象，自动实现公有接口；</li>
<li>对部分函数进行可为空声明；</li>
</ul>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20190120134038473.png" alt></p>
<h2 id="1-10-ignore"><a href="#1-10-ignore" class="headerlink" title="1.10 .ignore"></a>1.10 .ignore</h2><p>生成各种ignore文件，一键创建git ignore文件的模板，免得自己去写<br><img src="https://img-blog.csdnimg.cn/20190120134630536.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=,size_16,color_FFFFFF,t_70" alt></p>
<p><strong>关注我微信公众号每天获取更多干货。</strong><br><img src="https://img-blog.csdnimg.cn/20190120145322982.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pibigstar.com/2019/07/16/网页中QQ常用代码/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="派大星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/qq.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="派大星的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/16/网页中QQ常用代码/" itemprop="url">网页中QQ常用代码</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-16T03:03:04+08:00">
                2019-07-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具使用-随笔小记/" itemprop="url" rel="index">
                    <span itemprop="name">工具使用,随笔小记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@[toc]</p>
<h2 id="1-点击链接打开会话窗口"><a href="#1-点击链接打开会话窗口" class="headerlink" title="1. 点击链接打开会话窗口"></a>1. 点击链接打开会话窗口</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://wpa.qq.com/msgrd?v=3&amp;uin=741047261&amp;site=qq&amp;menu=yes"</span>&gt;</span>点击与我联系<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--下面这个也可以实现 --&gt;</span></span><br><span class="line">tencent://message/?Menu=yes&amp;uin=741047261&amp;Service=300&amp;sigT=45a1e5847943b64c6ff3990f8a9e644d2b31356cb0b4ac6b24663a3c8dd0f8aa12a595b1714f9d45</span><br></pre></td></tr></table></figure>

<h2 id="2-点击链接添加好友"><a href="#2-点击链接添加好友" class="headerlink" title="2. 点击链接添加好友"></a>2. 点击链接添加好友</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=741047261&amp;website=www.oicqzone.com"</span>&gt;</span>添加好友<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-点击加群"><a href="#3-点击加群" class="headerlink" title="3. 点击加群"></a>3. 点击加群</h2><ol>
<li>进入 <a href="https://qun.qq.com/join.html" target="_blank" rel="noopener">https://qun.qq.com/join.html</a></li>
<li>选择哪个群<br><img src="https://img-blog.csdn.net/20180526150938773?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></li>
<li>复制网页代码即可<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://shang.qq.com/wpa/qunwpa?idkey=875408aae56499d92ddcdda3966fa7c01e1d3b587b038d335917df7d41893170"</span>&gt;</span>点击进群<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="4-手机中网页点击链接打开指定会话窗口"><a href="#4-手机中网页点击链接打开指定会话窗口" class="headerlink" title="4. 手机中网页点击链接打开指定会话窗口"></a>4. 手机中网页点击链接打开指定会话窗口</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"mqqwpa://im/chat?chat_type=wpa&amp;uin=5741047261&amp;version=1&amp;src_type=web&amp;web_src=oicqzone.com"</span>&gt;</span>点击联系我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-Android中打开指定QQ会话窗口"><a href="#5-Android中打开指定QQ会话窗口" class="headerlink" title="5. Android中打开指定QQ会话窗口"></a>5. Android中打开指定QQ会话窗口</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String url=<span class="string">"mqqwpa://im/chat?chat_type=wpa&amp;uin=741047261"</span>;  </span><br><span class="line">startActivity(<span class="keyword">new</span> Intent(Intent.ACTION_VIEW, Uri.parse(url)));</span><br></pre></td></tr></table></figure>

<h2 id="6-Android中打开指定应用程序"><a href="#6-Android中打开指定应用程序" class="headerlink" title="6. Android中打开指定应用程序"></a>6. Android中打开指定应用程序</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent();</span><br><span class="line">ComponentName cmp = <span class="keyword">new</span> ComponentName(<span class="string">"com.sina.weibo"</span>,<span class="string">"com.sina.weibo.EditActivity"</span>);</span><br><span class="line">intent.setAction(Intent.ACTION_MAIN);</span><br><span class="line">intent.addCategory(Intent.CATEGORY_LAUNCHER);</span><br><span class="line">intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">intent.setComponent(cmp);</span><br><span class="line">startActivityForResult(intent, <span class="number">0</span>);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">另：几个常用的Package命令：</span></span><br><span class="line"><span class="comment">新浪微博（编辑界面）：com.sina.weibo    com.sina.weibo.EditActivity</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">腾讯微博（编辑界面）：com.tencent.WBlog    com.tencent.WBlog.activity.MicroblogInput</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">微信：   com.tencent.mm           com.tencent.mm.ui.LauncherUI</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">QQ:     com.tencent.mobileqq   com.tencent.mobileqq.activity.HomeActivity</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure>

<h2 id="7-获取QQ头像"><a href="#7-获取QQ头像" class="headerlink" title="7. 获取QQ头像"></a>7. 获取QQ头像</h2><ol>
<li><a href="http://q1.qlogo.cn/g?b=qq&amp;nk=741047261&amp;s=100" target="_blank" rel="noopener">http://q1.qlogo.cn/g?b=qq&amp;nk=741047261&amp;s=100</a></li>
<li><a href="http://q2.qlogo.cn/headimg_dl?dst_uin=741047261&amp;spec=100" target="_blank" rel="noopener">http://q2.qlogo.cn/headimg_dl?dst_uin=741047261&amp;spec=100</a></li>
</ol>
<blockquote>
<p>nk是你的QQ号，s是尺寸，尺寸对应关系可以看下图</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20190107152859591.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bm1veGk=,size_16,color_FFFFFF,t_70" alt></p>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/qq.png" alt="派大星">
            
              <p class="site-author-name" itemprop="name">派大星</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">137</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">64</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">230</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/pibigstar" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://blog.csdn.net/junmoxi" target="_blank" title="CSDN">
                      
                        <i class="fa fa-fw fa-yelp"></i>CSDN</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-[object Object]"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">派大星</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>








        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.4"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.4"></script>


  

</body>
</html>
<!-- 页面点击小红心 -->
 <script type="text/javascript" src="/js/src/clicklove.js"></script>
